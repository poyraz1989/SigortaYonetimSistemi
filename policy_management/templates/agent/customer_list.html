{% extends "agent/base_agent.html" %}

{% block title %}MÃ¼ÅŸterilerim{% endblock %}

{% block content %}
    <h2 class="mb-4">MÃ¼ÅŸterilerim ({{ customers|length }} Adet)</h2>
    
    <p class="text-end">
		<a href="{% url 'agent_export_customers' %}" class="btn btn-primary me-2">ðŸ“Š CSV Ä°ndir</a>
        <a href="{% url 'agent_customer_add' %}" class="btn btn-success">âž• Yeni MÃ¼ÅŸteri Ekle</a>	
    </p>

    {% if customers %}
        <div class="table-responsive">
            <table class="table table-striped table-hover">
                <thead class="table-dark">
                    <tr>
						<th>AdÄ± SoyadÄ±</th>
						<th>TCKN</th>
						<th>DoÄŸum Tarihi</th> 
						<th>Telefon</th>
						<th>Adres</th>
						<th>Ä°ÅŸlemler</th>
					</tr>
                </thead>
                <tbody>
    {% for customer in object_list %}
    <tr>
        <td><a href="#">{{ customer.name }}</a></td> 
        
        <td>
            {% if customer.tckn %}{{ customer.tckn }}{% else %}-{% endif %}
        </td>
        
        <td>
            {% if customer.date_of_birth %}
                {{ customer.date_of_birth|date:"d M Y" }}
            {% else %}
                -
            {% endif %}
        </td>

        <td>
            {% if customer.phone %}{{ customer.phone }}{% else %}-{% endif %}
        </td>

        <td>
            {% if customer.address_city %}{{ customer.address_city }}{% else %}-{% endif %}
        </td>
        
        <td>
            <a href="{% url 'edit_customer' customer.pk %}" class="btn btn-sm btn-primary">DÃ¼zenle</a>
        </td>
    </tr>
    {% endfor %}
</tbody>
            </table>
        </div>
    {% else %}
        <div class="alert alert-warning" role="alert">
            HenÃ¼z size ait kayÄ±tlÄ± bir mÃ¼ÅŸteriniz bulunmamaktadÄ±r.
            <a href="{% url 'agent_customer_add' %}" class="alert-link">Hemen Yeni Bir MÃ¼ÅŸteri Ekleyin.</a>
        </div>
    {% endif %}
{% endblock %}